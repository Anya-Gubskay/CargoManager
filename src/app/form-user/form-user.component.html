<div class="container-user">
  <h2 class="container-user__title">User</h2>
  <div class="row">
    <form [formGroup]="formUser">
      <div class="form-group">
        <label for="surnameUser">Surname *</label>
        <input type="text" class="form-control" id="surnameUser" placeholder="User surname" name="surname"
               formControlName="surname">
      </div>
      <app-validation-messages [controlName]="formUser.controls['surname']" [nameField]="surname">
      </app-validation-messages>
      <div class="form-group">
        <label for="nameUser">Name *</label>
        <input type="text" class="form-control" id="nameUser" placeholder="User name" name="name" formControlName="name"
               (ngModelChange)="changesName()">
      </div>
      <app-validation-messages [controlName]="formUser.controls['name']" [nameField]="name"></app-validation-messages>
      <div class="form-group">
        <label for="patronymicUser">Patronymic</label>
        <input type="text" class="form-control" id="patronymicUser" placeholder="User patronymic" name="patronymic"
               formControlName="patronymic">
      </div>
      <div class="form-group">
        <label for="roleUser">User role *</label>
        <ng-multiselect-dropdown-angular7 id="roleUser" formControlName="role" [placeholder]="'Select user role'"
                                          [data]="dropdownList" [(ngModel)]="selectedItems"
                                          [settings]="dropdownSettings"
                                          (onSelect)="onItemSelect($event)" (onSelectAll)="onSelectAll($event)">
        </ng-multiselect-dropdown-angular7>
      </div>
      <div class="form-group">
        <label for="email">Email *</label>
        <input type="email" class="form-control" id="email" placeholder="User Email (must be unique)" name="email"
               formControlName="email" (ngModelChange)="changesEmail()">
      </div>
      <app-validation-messages [controlName]="formUser.controls['email']" [nameField]="email" [errorField]="errorEmail">
      </app-validation-messages>
      <div class="form-group">
        <label for="userPhone">Phone *</label>
        <input type="text" class="form-control" id="userPhone" placeholder="User Phone" name="phone"
               formControlName="phone">
      </div>
      <app-validation-messages [controlName]="formUser.controls['phone']" [nameField]="phone"></app-validation-messages>
      <div class="form-group" formGroupName="address" id="address">
        <label for="address">Address *</label>
        <div class="address-field-user">
          <label for="cityAddressUser">City*</label>
          <input type="text" class="form-control" placeholder="City" id="cityAddressUser" formControlName="city">
        </div>
        <app-validation-messages [controlName]="address.controls['city']" [nameField]="city"
                                 [errorMargin]="errorMargin"></app-validation-messages>
        <div class="address-field-user">
          <label for="streetAddressUser">Street *</label>
          <input type="text" class="form-control" placeholder="Street" id="streetAddressUser" formControlName="street">
        </div>
        <app-validation-messages [controlName]="address.controls['street']" [nameField]="street"
                                 [errorMargin]="errorMargin"></app-validation-messages>
        <div class="address-field-user">
          <label for="houseAddressUser">House *</label>
          <input type="text" class="form-control" placeholder="House" id="houseAddressUser" formControlName="house">
        </div>
        <app-validation-messages [controlName]="address.controls['house']" [nameField]="house"
                                 [errorMargin]="errorMargin"></app-validation-messages>
        <div class="address-field-user">
          <label for="officeAddressUser">Office</label>
          <input type="text" class="form-control" placeholder="Office" id="officeAddressUser" formControlName="office">
        </div>
      </div>
      <div class="form-group">
        <label for="userLogin">Login *</label>
        <input type="text" class="form-control" id="userLogin" placeholder="User login (must be unique)" name="userName"
               formControlName="username" (ngModelChange)="changesName()">
      </div>
      <app-validation-messages [controlName]="formUser.controls['username']" [nameField]="username"
                               [errorField]="errorUserName"></app-validation-messages>
      <div class="form-group" *ngIf="showPassword">
        <label for="userPassword">Password *</label>
        <input type="password" class="form-control" id="userPassword" placeholder="Password (minimum 7 symbols)"
               name="password"
               formControlName="password">
      </div>
      <app-validation-messages [controlName]="formUser.controls['password']" [nameField]="password">
      </app-validation-messages>
      <mat-form-field>
        <label for="dateOfBirth">Date of birth</label>
        <input matInput [matDatepicker]="picker" placeholder="" id="dateOfBirth" name="dateOfBirth"
               formControlName="dateOfBirth">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div class="form-group">
        <button *ngIf="add" (click)="addUser()" [disabled]='!formUser.valid' class="waves-effect waves-light btn">Add
          User
        </button>
      </div>
      <div class="form-group" *ngIf="reset">
        <button (click)="resetPassword()" class="waves-effect waves-light btn">{{buttonReset}}</button>
      </div>
      <div class="form-group">
        <button *ngIf="edit" (click)="editUser()"
                [disabled]="!formUser.touched || !formUser.valid || errorUserName || errorEmail"
                class="waves-effect waves-light btn">Edit User
        </button>
      </div>
      <div class="form-success">
        <button (click)="$event.preventDefault()" routerLink="/users" class="waves-effect waves-light btn">Back to users
          list
        </button>
      </div>
    </form>
  </div>
</div>
